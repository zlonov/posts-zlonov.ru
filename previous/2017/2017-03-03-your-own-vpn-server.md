---
layout: single
title: 'Как настроить свой личный VPN-сервер за час-другой?'
date: 2017-03-03
featured-image: /2017/2017-03-03-your-own-vpn-server/VPN-tunnel.jpg
featured-image-alt: Как настроить свой личный VPN-сервер за час-другой?
excerpt: Собственный сервер VPN, которым будете пользоваться только вы.
tags: ['Digital Ocean', 'VPN', 'своими руками']
category: security
AllowComments: true
LinkedLinks: ""
---
> **Добавлено 28.02.2024**\
> Основаниями для включения в Единый реестр (доменных имен, указателей страниц сайтов в сети "Интернет" и сетевых адресов, позволяющих идентифицировать сайты в сети "Интернет", содержащие информацию, распространение которой в Российской Федерации запрещено) является наличие [...]\
> **«м) информации о способах, методах обеспечения доступа к информационным ресурсам и (или) информационно-телекоммуникационным сетям, доступ к которым ограничен на территории Российской Федерации**».\
> Источник: [Федеральный закон от 31.07.2023 № 406-ФЗ](http://publication.pravo.gov.ru/document/0001202307310022)


{::comment}

> **Добавлено 08.08.2019**\
> См.также: [Персональный VPN-сервер с возможностью подключения штатными средствами](/clientless-vpn)

Причины для использования VPN-сервера могут быть разными: сокрытие реального IP, затруднение для посторонних отслеживания посещаемых вами сайтов, наконец, тот же самый пресловутый обход блокировок, да и мало ли, что ещё.

Готовых VPN-сервисов сейчас так много, что глаза разбегаются. Не знаю, есть ли среди них явные лидеры - присматривался неоднократно, но в итоге что-то так ничего и не выбрал. Свой выбор я остановил всё же на не самом простом, но проверенном (вот уже немного старенький [пост Артёма Агеева на эту же тему](http://www.itsec.pro/2014/01/vpn.html)) способе с разворачиваем собственного VPN-сервера у облачного провайдера - Digital Ocean в моём случае.

Что потребуется, чтобы всё заработало?
 - реальный адрес электронной почты;
 - реальная кредитная карта (либо счёт PayPal c балансом в $5, которые спишутся);
 - телефонный номер (не проверяется);
 - отсутствие страха перед командной строкой.

Что получится на выходе?
 - собственный сервер VPN, которым будете пользоваться только вы;
 - лимит трафика в 1000 ГБ/месяц;
 - два бесплатных месяца (три за $5, если воспользоваться сервисом PayPal);
 - последующее использование $5/месяц.

## Первый шаг - регистрация на Digital Ocean

Так как в изначальных требованиях указал "отсутствие страха перед командной строкой", то не буду с детальными скриншотами описывать несложный процесс регистрации. Лучше дам реферальную ссылку: [https://m.do.co/c/f27f98d20847](https://m.do.co/c/f27f98d20847).

При регистрации по этой ссылке вам будет начислено $10 на счёт. На момент написания статьи действовал ещё такой дополнительный промокод: DODEPLOY (по $5 два месяца подряд).

{% include one_image_new2.html picture_name="Digital Ocean - реферальные $10" picture_path="2017/2017-03-03-your-own-vpn-server/Digital-Ocean-реферальные-10.jpg" %}

Все эти дополнительные реферальные ссылки и промокоды дают хорошую возможность попробовать сервис какое-то время бесплатно, после чего решить - действительно ли он нужен.

После регистрации и подтверждения адреса электронной почты на следующем шаге надо будет ввести данные кредитной карты либо оплатить минимум $5 со счёта PayPal. Хорошим правилом является использование при оплате в Интернете виртуальных карт, но, к сожалению, из имеющихся у меня в наличии виртуальных карт Digital Ocean ни одну не принял, а вот списать через PayPal $5 с привязанной виртуальной карты согласился.

Обратите внимание, что удалить зарегистрированную кредитную карту просто так потом не удастся.

{% include one_image_new2.html picture_name="Digital Ocean - невозможно удалить данные кредитной карты" picture_path="2017/2017-03-03-your-own-vpn-server/Digital-Ocean-невозможно-удалить-данные-карты.jpg" %}

## Второй шаг - создание и настройка сервера

Теперь нужно создать сервер (droplet в терминологии Digital Ocean). В качестве дистрибутива нужно выбрать Ubuntu:

{% include one_image_new2.html picture_name="Digital Ocean - выбор дистрибутива" picture_path="2017/2017-03-03-your-own-vpn-server/Digital-Ocean-выбор-дистрибутива.jpg" %}

Для персонального VPN-сервера достаточно будет самого простого варианта из предлагаемых характеристик:

{% include one_image_new2.html picture_name="Digital Ocean - выбор параметров сервера" picture_path="2017/2017-03-03-your-own-vpn-server/Digital-Ocean-выбор-параметров-сервера.jpg" %}

Наконец, надо определиться с местом расположения ЦОДа. Хотя потом [регион можно поменять](https://www.digitalocean.com/community/tutorials/how-to-migrate-digitalocean-snapshots-between-regions) (не совсем тривиальным способом, к тому же потребуется небольшая его перенастройка), но лучше определиться сразу.

Основной критерий выбора региона - это, конечно, скорость соединения. У Digital Ocean есть сервис для тестирования скорости для каждого из ЦОДов, так что просто измерьте свою скорость для принятия решения.

Скорее всего, самыми быстрыми (для жителей России) окажутся вот эти три:

 - [Frankfurt 1](http://speedtest-fra1.digitalocean.com) - [http://speedtest-fra1.digitalocean.com/](http://speedtest-fra1.digitalocean.com)
 - [Amsterdam 2](http://speedtest-ams2.digitalocean.com) - [http://speedtest-ams2.digitalocean.com/](http://speedtest-ams2.digitalocean.com)
  - [Amsterdam 3](http://speedtest-ams3.digitalocean.com) - [http://speedtest-ams3.digitalocean.com/](http://speedtest-ams3.digitalocean.com)

После создания сервера (droplet) данные для доступа к нему придут по электронной почте. Теперь нужно провести его первоначальную настройку, воспользовавшись вот этой детальной пошаговой инструкцией на русском языке: [Начальная настройка сервера c Ubuntu 16.04](https://www.digitalocean.com/community/tutorials/c-ubuntu-16-04-ru).

Вот тут как раз первый раз нужно будет работать в командной строке. Совсем с нулевыми знаниями, конечно, вряд ли что-то получится, но объяснено всё очень подробно, так что минимального опыта хватит за глаза.

## Третий шаг - настройка VPN

Финальный шаг тоже задокументирован крайне подробно вот в этом руководстве: [Как настроить сервер OpenVPN в Ubuntu 16.04](https://www.digitalocean.com/community/tutorials/openvpn-ubuntu-16-04-ru).

Тут, конечно, нюансов побольше, как и команд, но тоже вполне реально разобраться. Рекомендую только все имена, которые можно заменить на свои, оставлять без изменений (по крайней мере при первой подобной настройке) - так будет проще завершить этот квест. Завершающим этапом настройки будет установка клиента (ноутбук, компьютер, смартфон и проч.), но раз уж вы до него добрались, то и тут, думаю, проблем не возникнет.

---

Изначально пост должен был быть детальным и со скриншотами, но у сообщества Digital Ocean такие подробные руководства, что мне, как видно, почти не пришлось ничего детально объяснять. Уверен, для технически подкованных специалистов мой пост вообще ничего нового не открыл, так как он скорее адресован тем, кто имеет технический бэкграунд, но редко заглядывает в консоль. Попробуйте этот вариант в качестве альтернативы платным VPN-сервисам "из коробки" - тут ведь даже от самого процесса настройки можно получить ностальгическое удовольствие =)

{:/comment}
